<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1,
  maximum-scale=5" />

  <link rel="icon" href="devchallenges.png" />

  <link rel="shortcut icon" type="image/x-icon" href="https://devchallenges.io/" />

  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;500&display=swap" rel="stylesheet" />

  <title>Devchallenges</title>
  <link rel="stylesheet"
    href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200" />
  <style>
    @import url('https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;700&display=swap');
  </style>
  <link rel="stylesheet" href="./assets/css/main.css">
  <link rel="stylesheet" href="./libs/alerts/src/css/myalert.css">
  <style>
    .material-symbols-outlined {
      font-variation-settings:
        'FILL' 1,
        'wght' 400,
        'GRAD' 0,
        'opsz' 48
    }
  </style>

</head>

<body>
  <header>
    <h1>Checkout</h1>
  </header>
  <main class="checkout c_alert">
    <form class="checkout--form" id="my__form">
      <section class="checkout--products">
        <div class="product">
          <div class="product--container">
            <div class="image--div">
              <img src="./assets/img/photo1.png" alt="product-1">
            </div>
            <div class="product--info">
              <p>
                <strong>Vintage Backbag</strong>
              </p>
              <div class="product--prices">
                <p>$54.99</p>
                <p>
                  $94.99
                </p>
              </div>

              <div class="product--add">
                <span class="btn--1 material-symbols-outlined" onclick="minus(1)">
                  remove
                </span>
                <input type="number" class="input--product" id="prod-1" min="0" max="100" readonly required value="1">
                <span class="btn--1 material-symbols-outlined" onclick="add(1)">
                  add
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="product">
          <div class="product--container">
            <div class="image--div">
              <img src="./assets/img/photo2.png" alt="product-2">
            </div>
            <div class="product--info">
              <p>
                <strong>Vintage Backbag</strong>
              </p>
              <div class="product--prices">
                <p>$54.99</p>
                <p>
                  $94.99
                </p>
              </div>

              <div class="product--add">
                <span class="btn--1 material-symbols-outlined" onclick="minus(2)">
                  remove
                </span>
                <input type="number" class="input--product" id="prod-2" min="0" max="100" readonly required value="1">
                <span class="btn--1 material-symbols-outlined" onclick="add(2)">
                  add
                </span>
              </div>
            </div>
          </div>
        </div>

        <div class="checkout--total">
          <p class="total--1 bordered-x">
            <span>Shipping</span>
            <span>$19</span>
          </p>
          <p class="total--2">
            <span>Total</span>
            <span>$19</span>
          </p>
        </div>
      </section>

      <section class="checkout--address">
        <div class="c--container">
          <article class="contact">
            <h3>Contact information</h3>
            <div class="information">
              <div class="control--group validity">
                <label for="email">E-mail</label>
                <div class="input--icon">
                  <span class="material-symbols-outlined ch-icon">
                    mail
                  </span>
                  <input type="email" name="mail" id="mail" placeholder="Enter your email..." required>
                </div>
              </div>

              <div class="control--group validity">
                <label for="phone">Phone</label>
                <div class="input--icon">
                  <span class="material-symbols-outlined ch-icon">
                    phone
                  </span>
                  <input type="tel" name="phone" id="phone" placeholder="Enter your phone..." required>
                </div>
              </div>

            </div>
          </article>

          <article class="shipping">
            <h3>Shipping address</h3>
            <div class="information">
              <div class="control--group validity">
                <label for="f_name">Full name</label>
                <div class="input--icon">
                  <span class="material-symbols-outlined ch-icon">
                    account_circle
                  </span>
                  <input type="text" name="f_name" id="f_name" placeholder="Enter your full name..." required>
                </div>
              </div>

              <div class="control--group validity">
                <label for="address">Address</label>
                <div class="input--icon">
                  <span class="material-symbols-outlined ch-icon">
                    home
                  </span>
                  <input type="text" name="address" id="address" placeholder="Your address..." required>
                </div>
              </div>

              <div class="control--group validity">
                <label for="city">City</label>
                <div class="input--icon">
                  <span class="material-symbols-outlined ch-icon">
                    location_city
                  </span>
                  <input type="text" name="city" id="city" placeholder="Your city..." required>
                </div>
              </div>

              <div class="d-f">
                <div class="control--group validity city__rel">
                  <label for="country">Country</label>
                  <div class="input--icon">
                    <span class="material-symbols-outlined ch-icon">
                      public
                    </span>
                    <input type="text" name="country" id="country" placeholder="Your country..." required>
                    <span class="btn--expand material-symbols-outlined" id="expand__menu">
                      expand_more
                    </span>
                    <article class="city__menu">
                      <h5>Countries</h5>
                    </article>
                  </div>
                </div>

                <div class="control--group validity">
                  <label for="postal_code">Postal code</label>
                  <div class="input--icon">
                    <span class="material-symbols-outlined ch-icon">
                      markunread_mailbox
                    </span>
                    <input type="number" name="postal_code" id="postal_code" placeholder="Your postal code..." required>
                  </div>
                </div>
              </div>

            </div>
          </article>
        </div>
        <button type="button" onclick="validation()" class="btn--success">Continue</button>
      </section>


    </form>
  </main>

  <script src="./assets/js/countries.js"></script>
  <script src="./libs/alerts/src/js/myAlert.js"></script>
  <script>

    const errors = []
    /*
    Product event
    */
    function add(prod) {
      if (prod == 1) {
        document.getElementById("prod-1").value = parseInt(document.getElementById("prod-1").value) + 1;
      }

      if (prod == 2) {
        document.getElementById("prod-2").value = parseInt(document.getElementById("prod-2").value) + 1;
      }
    }

    function minus(prod) {
      if (prod == 1 && (document.getElementById("prod-1").value > 0)) {
        document.getElementById("prod-1").value -= 1;
      }

      if (prod == 2 && (document.getElementById("prod-2").value > 0)) {
        document.getElementById("prod-2").value -= 1;
      }
    }





    function validation() {
      const arr_contenedores = document.querySelectorAll(".validity");



      arr_contenedores.forEach(el => {
        let obj = el.getElementsByTagName('input').item(0);
        if (!obj.checkValidity()) {
          el.classList.add("error--validate");

          if (!errors.includes(el)) {
            errors.push(el)
          }
        } else {
          el.classList.remove("error--validate");
          if (errors.includes(el)) {
            errors.pop(el)
          } else {
            errors.pop(el)
          }

        }
      })

      if (errors.length > 0) {
        const alerta = new MyAlert();
        alerta.text = "Please fill out all fields";
        alerta.type_a = "error";
        alerta.btn_text = "Close"
        alerta.create__alert();
        // setTimeout(() => {
        //   alerta.destroy__alert();
        // }, 3000);
      }

      success()

    }

    function success() {
      if (errors.length == 0) {
        const alerta = new MyAlert();
        alerta.text = "Success";
        alerta.type_a = "success";
        alerta.btn_text = "Close"
        alerta.create__alert();
        setTimeout(() => {
          alerta.destroy__alert();
        }, 3000);
        setTimeout(() => {
          document.querySelector("#my__form").reset();
        }, 1000);

      }
    }



  </script>
</body>

</html>